<!--pages/category/category.wxml-->
<view class="container">
  <!-- åˆ†ç±»åˆ—è¡¨ -->
  <view class="categories-section" wx:if="{{!currentCategoryId && type === 'category' && !loading}}">
    <view class="categories-grid">
      <view class="category-item" wx:for="{{categories}}" wx:key="id" bindtap="onCategoryTap" data-category="{{item}}">
        <image class="category-image" src="{{getImageUrl(item.image)}}" mode="aspectFill"></image>
        <view class="category-info">
          <text class="category-name">{{item.name}}</text>
          <text class="category-desc" wx:if="{{item.description}}">{{item.description}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- èœå“åˆ—è¡¨ -->
  <view class="dishes-section" wx:if="{{(currentCategoryId || type === 'hot') && !loading}}">
    <!-- è¿”å›æŒ‰é’® -->
    <view class="back-bar" wx:if="{{currentCategoryId}}">
      <text class="back-btn" bindtap="onBackToCategories">â† è¿”å›åˆ†ç±»</text>
      <text class="current-category">{{currentCategoryName}}</text>
    </view>
    
    <!-- èœå“ç½‘æ ¼ -->
    <view class="dishes-grid" wx:if="{{dishes.length > 0}}">
      <view class="dish-item" wx:for="{{dishes}}" wx:key="id" bindtap="onDishTap" data-dish="{{item}}">
        <image class="dish-image" src="{{getImageUrl(item.image)}}" mode="aspectFill"></image>
        <view class="dish-info">
          <text class="dish-name">{{item.name}}</text>
          <view class="dish-meta">
            <text class="dish-difficulty" style="color: {{getDifficultyColor(item.difficulty)}}">{{getDifficultyText(item.difficulty)}}</text>
            <text class="dish-time">{{item.cookingTime}}åˆ†é’Ÿ</text>
          </view>
          <view class="dish-stats">
            <text class="dish-views">{{item.viewCount || 0}}æ¬¡æµè§ˆ</text>
            <text class="dish-collects">{{item.collectCount || 0}}æ¬¡æ”¶è—</text>
          </view>
        </view>
      </view>
    </view>
    
    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:if="{{loadingMore}}">
      <text>åŠ è½½ä¸­...</text>
    </view>
    
    <!-- æ²¡æœ‰æ›´å¤š -->
    <view class="no-more" wx:if="{{!hasMore && dishes.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>
    
    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty" wx:if="{{dishes.length === 0}}">
      <text class="empty-icon">ğŸ½ï¸</text>
      <text class="empty-text">æš‚æ— èœå“</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <!-- åº•éƒ¨å¯¼èˆªæ  -->
  <view class="bottom-nav">
    <view class="nav-item" bindtap="goToHome">
      <view class="nav-icon">ğŸ </view>
      <text class="nav-text">ä¸‹å¨æˆ¿</text>
    </view>
    <view class="nav-item active">
      <view class="nav-icon">ğŸ“‚</view>
      <text class="nav-text">åˆ†ç±»</text>
    </view>
    <view class="nav-item" bindtap="goToFavorites">
      <view class="nav-icon">â­</view>
      <text class="nav-text">æ”¶è—</text>
    </view>
    <view class="nav-item" bindtap="goToProfile">
      <view class="nav-icon">ğŸ‘¤</view>
      <text class="nav-text">æˆ‘çš„</text>
    </view>
  </view>
</view>