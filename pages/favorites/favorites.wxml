<!--pages/favorites/favorites.wxml-->
<view class="container">
  <!-- æ“ä½œæ  -->
  <view class="action-bar" wx:if="{{favorites.length > 0}}">
    <text class="favorites-count">å…± {{favorites.length}} ä¸ªæ”¶è—</text>
    <text class="clear-btn" bindtap="onClearAll">æ¸…ç©º</text>
  </view>

  <!-- æ”¶è—åˆ—è¡¨ -->
  <view class="favorites-list" wx:if="{{favorites.length > 0 && !loading}}">
    <view class="favorite-item" wx:for="{{favorites}}" wx:key="id">
      <view class="dish-content" bindtap="onDishTap" data-dish="{{item}}">
        <image class="dish-image" src="{{getImageUrl(item.image)}}" mode="aspectFill"></image>
        <view class="dish-info">
          <text class="dish-name">{{item.name}}</text>
          <text class="dish-desc" wx:if="{{item.description}}">{{item.description}}</text>
          <view class="dish-meta">
            <text class="dish-difficulty" style="color: {{getDifficultyColor(item.difficulty)}}">{{getDifficultyText(item.difficulty)}}</text>
            <text class="dish-time">{{item.cookingTime}}åˆ†é’Ÿ</text>
            <text class="dish-category">{{item.categoryName}}</text>
          </view>
          <view class="dish-stats">
            <text class="dish-views">{{item.viewCount || 0}}æ¬¡æµè§ˆ</text>
            <text class="dish-collects">{{item.collectCount || 0}}æ¬¡æ”¶è—</text>
          </view>
        </view>
      </view>
      <view class="remove-btn" bindtap="onRemoveFavorite" data-dish="{{item}}">
        <text class="remove-text">å–æ¶ˆæ”¶è—</text>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty" wx:if="{{!loading && favorites.length === 0}}">
    <text class="empty-icon">ğŸ“</text>
    <text class="empty-text">è¿˜æ²¡æœ‰æ”¶è—ä»»ä½•èœå“</text>
    <text class="empty-tip">å»é¦–é¡µçœ‹çœ‹æœ‰ä»€ä¹ˆå¥½åƒçš„å§</text>
    <button class="goto-home-btn" bindtap="gotoHome">å»é¦–é¡µé€›é€›</button>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view>
  <!-- åº•éƒ¨å¯¼èˆªæ  -->
  <view class="bottom-nav">
    <view class="nav-item" bindtap="goToHome">
      <view class="nav-icon">ğŸ </view>
      <text class="nav-text">ä¸‹å¨æˆ¿</text>
    </view>
    <view class="nav-item" bindtap="goToCategory">
      <view class="nav-icon">ğŸ“‚</view>
      <text class="nav-text">åˆ†ç±»</text>
    </view>
    <view class="nav-item active">
      <view class="nav-icon">â­</view>
      <text class="nav-text">æ”¶è—</text>
    </view>
    <view class="nav-item" bindtap="goToProfile">
      <view class="nav-icon">ğŸ‘¤</view>
      <text class="nav-text">æˆ‘çš„</text>
    </view>
  </view>