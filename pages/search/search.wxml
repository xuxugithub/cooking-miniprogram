<!--pages/search/search.wxml-->
<view class="container">
  <!-- æœç´¢æ  -->
  <view class="search-bar">
    <view class="search-input-wrapper">
      <input class="search-input" 
             placeholder="æœç´¢èœå“ã€é£Ÿæ..." 
             value="{{keyword}}" 
             bindinput="onSearchInput"
             bindconfirm="onSearchConfirm"
             focus="{{true}}"
             confirm-type="search" />
      <text class="search-btn" bindtap="onSearchConfirm">æœç´¢</text>
    </view>
  </view>

  <!-- æœç´¢å»ºè®®åŒºåŸŸ -->
  <view class="search-suggestions" wx:if="{{!hasSearched}}">
    <!-- æœç´¢å†å² -->
    <view class="history-section" wx:if="{{searchHistory.length > 0}}">
      <view class="section-header">
        <text class="section-title">æœç´¢å†å²</text>
        <text class="clear-btn" bindtap="onClearHistory">æ¸…ç©º</text>
      </view>
      <view class="keywords-list">
        <text class="keyword-item" 
              wx:for="{{searchHistory}}" 
              wx:key="*this"
              bindtap="onHistoryTap" 
              data-keyword="{{item}}">{{item}}</text>
      </view>
    </view>

    <!-- çƒ­é—¨æœç´¢ -->
    <view class="hot-section">
      <view class="section-title">çƒ­é—¨æœç´¢</view>
      <view class="keywords-list">
        <text class="keyword-item hot" 
              wx:for="{{hotKeywords}}" 
              wx:key="*this"
              bindtap="onHotKeywordTap" 
              data-keyword="{{item}}">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- æœç´¢ç»“æœ -->
  <view class="search-results" wx:if="{{hasSearched}}">
    <!-- ç»“æœç»Ÿè®¡ -->
    <view class="results-header" wx:if="{{!loading}}">
      <text class="results-count">æ‰¾åˆ° {{pagination.total}} ä¸ªç›¸å…³èœå“</text>
    </view>

    <!-- ç»“æœåˆ—è¡¨ -->
    <view class="results-list" wx:if="{{searchResults.length > 0}}">
      <view class="result-item" wx:for="{{searchResults}}" wx:key="id" bindtap="onDishTap" data-dish="{{item}}">
        <image class="result-image" src="{{getImageUrl(item.image)}}" mode="aspectFill"></image>
        <view class="result-info">
          <text class="result-name">{{item.name}}</text>
          <text class="result-desc" wx:if="{{item.description}}">{{item.description}}</text>
          <view class="result-meta">
            <text class="result-difficulty" style="color: {{getDifficultyColor(item.difficulty)}}">{{getDifficultyText(item.difficulty)}}</text>
            <text class="result-time">{{item.cookingTime}}åˆ†é’Ÿ</text>
            <text class="result-category">{{item.categoryName}}</text>
          </view>
          <view class="result-stats">
            <text class="result-views">{{item.viewCount || 0}}æ¬¡æµè§ˆ</text>
            <text class="result-collects">{{item.collectCount || 0}}æ¬¡æ”¶è—</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½æ›´å¤š -->
    <view class="load-more" wx:if="{{loadingMore}}">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <!-- æ²¡æœ‰æ›´å¤š -->
    <view class="no-more" wx:if="{{!hasMore && searchResults.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>

    <!-- ç©ºç»“æœ -->
    <view class="empty-results" wx:if="{{!loading && searchResults.length === 0}}">
      <text class="empty-icon">ğŸ”</text>
      <text class="empty-text">æ²¡æœ‰æ‰¾åˆ°ç›¸å…³èœå“</text>
      <text class="empty-tip">è¯•è¯•å…¶ä»–å…³é”®è¯å§</text>
    </view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading" wx:if="{{loading}}">
    <text>æœç´¢ä¸­...</text>
  </view>
</view>
  <!-- åº•éƒ¨å¯¼èˆªæ  -->
  <view class="bottom-nav">
    <view class="nav-item" bindtap="goToHome">
      <view class="nav-icon">ğŸ </view>
      <text class="nav-text">ä¸‹å¨æˆ¿</text>
    </view>
    <view class="nav-item" bindtap="goToCategory">
      <view class="nav-icon">ğŸ“‚</view>
      <text class="nav-text">åˆ†ç±»</text>
    </view>
    <view class="nav-item" bindtap="goToFavorites">
      <view class="nav-icon">â­</view>
      <text class="nav-text">æ”¶è—</text>
    </view>
    <view class="nav-item" bindtap="goToProfile">
      <view class="nav-icon">ğŸ‘¤</view>
      <text class="nav-text">æˆ‘çš„</text>
    </view>
  </view>