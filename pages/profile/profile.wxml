<!--pages/profile/profile.wxml-->
<view class="container">
  <!-- 用户信息区域 -->
  <view class="user-section">
    <view class="user-info" wx:if="{{hasUserInfo}}">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="nickname">{{userInfo.nickName}}</text>
        <text class="welcome">欢迎使用厨小教</text>
        <!-- 粉丝和关注数 -->
        <view class="user-follow-stats">
          <view class="stat-item">
            <text class="stat-number">{{userStats.followCount}}</text>
            <text class="stat-label">关注</text>
          </view>
          <view class="stat-divider"></view>
          <view class="stat-item">
            <text class="stat-number">{{userStats.fansCount}}</text>
            <text class="stat-label">粉丝</text>
          </view>
        </view>
      </view>
    </view>
    
    <view class="login-section" wx:else>
      <text class="default-avatar">👤</text>
      <view class="login-info">
        <text class="login-title">授权后享受更多功能</text>
        <text class="login-desc">收藏菜品、记录浏览历史</text>
      </view>
      <button class="login-btn" bindtap="onGetUserProfile">立即授权</button>
    </view>
  </view>

  <!-- 功能菜单 -->
  <view class="menu-section">
    <view class="menu-group">
      <view class="menu-item" bindtap="onViewFavorites">
        <view class="menu-icon">❤️</view>
        <text class="menu-text">我的收藏</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="testToken">
        <view class="menu-icon">🔑</view>
        <text class="menu-text">测试Token</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onClearCache">
        <view class="menu-icon">🗑️</view>
        <text class="menu-text">清除缓存</text>
        <text class="menu-arrow">></text>
      </view>
    </view>

    <view class="menu-group">
      <button class="menu-item" open-type="share">
        <view class="menu-icon">📤</view>
        <text class="menu-text">分享小程序</text>
        <text class="menu-arrow">></text>
      </button>
      <view class="menu-item" bindtap="onFeedback">
        <view class="menu-icon">💬</view>
        <text class="menu-text">意见反馈</text>
        <text class="menu-arrow">></text>
      </view>
      <view class="menu-item" bindtap="onAbout">
        <view class="menu-icon">ℹ️</view>
        <text class="menu-text">关于我们</text>
        <text class="menu-arrow">></text>
      </view>
    </view>
  </view>
</view>
  <!-- 底部导航栏 -->
  <view class="bottom-nav">
    <view class="nav-item" bindtap="goToHome">
      <view class="nav-icon">🏠</view>
      <text class="nav-text">下厨房</text>
    </view>
    <view class="nav-item" bindtap="goToCategory">
      <view class="nav-icon">📂</view>
      <text class="nav-text">分类</text>
    </view>
    <view class="nav-item" bindtap="goToFavorites">
      <view class="nav-icon">⭐</view>
      <text class="nav-text">收藏</text>
    </view>
    <view class="nav-item active">
      <view class="nav-icon">👤</view>
      <text class="nav-text">我的</text>
    </view>
  </view>